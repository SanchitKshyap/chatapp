(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],{105:function(e,n){},108:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),i=t(28),o=t.n(i),c=t(6),u=t(3),s=t(2),l=t(20),f=t(5),m=t(7),d=t.n(m),p=t(15),g=t(9),b=t(22);function v(){var e=Object(u.a)(["\n  position: relative;\n  flex-grow: 1;\n  margin: 0.75em 0;\n"]);return v=function(){return e},e}function h(){var e=Object(u.a)(['\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  font-size: 0.875em;\n  color: rgba(0, 0, 0, 0.4);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  transform: translatex(0.75em);\n  transform: ',";\n  font-size: ",";\n  color: ",";\n  align-items: center;\n  display: flex;\n  pointer-events: none;\n  transition: 0.5s ease;\n"]);return h=function(){return e},e}function O(){var e=Object(u.a)(["\n  border-radius: 6px;\n  border: ",';\n  padding: 0.75em;\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  width: 100%;\n  margin: 0.5em 0;\n']);return O=function(){return e},e}var E=s.c.input(O(),function(e){return e.error?"1px solid rgba(213, 0, 0, 1)":"1px solid rgba(0, 0, 0, 0.2)"}),y=s.c.label(h(),function(e){return e.selected&&"translatey(-65%)"},function(e){return e.selected&&".7em"},function(e){return e.selected&&"rgba(0, 0, 0, .6)"}),x=s.c.div(v()),j=function(e){var n=e.label,t=e.type,i=e.name,o=e.value,u=e.onChange,s=e.error,l=e.onBlur,f=e.onFocus,m=Object(r.useState)(!1),d=Object(c.a)(m,2),p=d[0],g=d[1];return a.a.createElement(x,null,a.a.createElement(y,{selected:p},n),a.a.createElement(E,{type:t,name:i,value:o,onChange:u,onBlur:function(){""===o&&g(!p),l&&l()},onFocus:function(){""===o&&g(!p),f&&f()},error:s}))};function w(){var e=Object(u.a)(['\n  display: flex;\n  flex-grow: 1;\n  margin-top: 1em;\n  padding: 0.5em;\n  justify-content: center;\n  font-family: "Open Sans", sans-serif;\n  font-weight: 600;\n  color: ',";\n  font-size: 1em;\n  border-radius: 6px;\n  border: ",";\n  background-color: ",";\n  outline: none;\n  transition: ",";\n  &:hover {\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n      0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    box-shadow: none;\n  }\n"]);return w=function(){return e},e}var C=s.c.button(w(),function(e){return e.theme.buttonText||"rgb(245,245,245)"},function(e){return e.theme.buttonBorder||"none"},function(e){return e.theme.buttonBackground||"rgb(31, 31, 31)"},function(e){return e.theme.transition}),k=function(e){var n=e.children,t=e.onClick,r=e.disabled;return a.a.createElement(C,{disabled:r,onClick:t},n)};function T(){var e=Object(u.a)(['\n  text-align: center;\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  font-size: 0.875em;\n  color: rgba(213, 0, 0, 1);\n']);return T=function(){return e},e}function _(){var e=Object(u.a)(['\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  border-radius: 6px;\n  padding: 2em 2em 2em 2em;\n  box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12),\n    0 1px 3px 0 rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  & > h1 {\n    font-family: "Open Sans", sans-serif;\n    font-weight: 700;\n    color: rgba(0, 0, 0, 0.7);\n  }\n  @media (max-width: 576px) {\n    border: none;\n    box-shadow: none;\n    min-width: 100%;\n  }\n']);return _=function(){return e},e}var A=s.c.form(_()),I=s.c.p(T()),S=function(e){var n=e.title,t=e.error,r=e.children,i=e.onSubmit;return a.a.createElement(A,{onSubmit:function(e){e.preventDefault(),i(e)}},n&&a.a.createElement("h1",null,n),t&&a.a.createElement(I,null,t),r)},D=function(e){return{type:"LOGIN",payload:e}},N=function(e){return{type:"SET_ACTIVE_CHAT",payload:e}};function R(){var e=Object(u.a)(["\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  min-width: 21px;\n  min-height: 21px;\n  border-radius: 50%;\n  transition: 0.2s;\n  background: rgb(245, 245, 245);\n  transform: ",";\n"]);return R=function(){return e},e}function F(){var e=Object(u.a)(["\n  display: flex;\n  cursor: pointer;\n  min-width: 50px;\n  min-height: 25px;\n  border-radius: 25px;\n  position: relative;\n  transition: background-color 0.2s;\n  background: ",";\n"]);return F=function(){return e},e}var L=s.c.label(F(),function(e){return e.state?"rgba(90, 216, 177, 1)":"rgba(0, 0, 0, 0.4)"}),z=s.c.span(R(),function(e){return e.state?"translateX(calc(100% + 4px))":"unset"}),P=function(e){var n=e.onClick,t=e.state;return a.a.createElement(L,{onClick:n,state:t},a.a.createElement(z,{state:t}))};function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(t,!0).forEach(function(n){Object(g.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function H(){var e=Object(u.a)(['\n  display: flex;\n  align-items: center;\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  font-size: 0.775em;\n  color: rgba(0, 0, 0, 0.6);\n  & > span {\n    margin-right: .5rem\n  }\n']);return H=function(){return e},e}function U(){var e=Object(u.a)(['\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  flex-direction: column;\n  & > p {\n    text-align: center;\n    font-family: "Roboto", sans-serif;\n    font-weight: 500;\n    font-size: 0.875em;\n    color: rgba(0, 0, 0, 0.6);\n\n    & > a {\n      text-decoration: none;\n      color: inherit;\n      color: rgba(0, 0, 0, 0.8);\n    }\n  }\n']);return U=function(){return e},e}var G=s.c.div(U()),V=s.c.label(H()),J=function(){var e=Object(r.useState)({username:{touched:!1,value:""},password:{touched:!1,value:""},rememberMe:!1}),n=Object(c.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(""),u=Object(c.a)(o,2),s=u[0],l=u[1],m=Object(f.b)(),v=function(e){return i(B({},t,Object(g.a)({},e,B({},t[e],{touched:!0}))))},h=function(e,n){return i(B({},t,Object(g.a)({},e,B({},t[e],{value:n}))))},O={username:""!==t.username.value.trim(),password:""!==t.password.value.trim()},E=function(){var e=Object(p.a)(d.a.mark(function e(n){var r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t.username.value,password:t.password.value,remember:t.rememberMe})});case 3:if(200!==(r=e.sent).status){e.next=11;break}return e.next=7,r.json();case 7:a=e.sent,m(D(a)),e.next=12;break;case 11:401===r.status&&l("Incorrect username/password");case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}},e,null,[[0,14]])}));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(G,null,a.a.createElement(S,{title:"Login",error:s,onSubmit:E},a.a.createElement(j,{label:"Username",type:"text",name:"username",value:t.username.value,onChange:function(e){return h("username",e.target.value)},error:!!t.username.touched&&!O.username,onBlur:function(){return v("username")},autocomplete:"username"}),a.a.createElement(j,{label:"Password",type:"password",name:"password",value:t.password.value,onChange:function(e){return h("password",e.target.value)},error:!!t.password.touched&&!O.password,onBlur:function(){return v("password")},autocomplete:"password"}),a.a.createElement(V,null,a.a.createElement("span",null,"Remember me"),a.a.createElement(P,{onClick:function(){return i(B({},t,{rememberMe:!t.rememberMe}))},state:t.rememberMe})),a.a.createElement(k,{type:"submit",disabled:!Object.keys(O).some(function(e){return O[e]})},"Login")),a.a.createElement("p",null,"Don't have an account? ",a.a.createElement(b.b,{to:"/register"},"Register")))};function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(t,!0).forEach(function(n){Object(g.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function K(){var e=Object(u.a)(['\n  text-align: center;\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  font-size: 0.875em;\n  color: rgba(0, 205, 93, 1);\n']);return K=function(){return e},e}function X(){var e=Object(u.a)(['\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n  & > p {\n    text-align: center;\n    font-family: "Roboto", sans-serif;\n    font-weight: 500;\n    font-size: 0.875em;\n    color: rgba(0, 0, 0, 0.6);\n    & > a {\n      text-decoration: none;\n      color: inherit;\n      color: rgba(0, 0, 0, 0.8);\n    }\n  }\n']);return X=function(){return e},e}var $=s.c.div(X()),q=s.c.p(K()),Y=Object(s.d)(function(e){var n=e.history,t=Object(r.useState)({username:{touched:!1,value:""},password:{touched:!1,value:""},passwordConfirm:{touched:!1,value:""},firstname:{touched:!1,value:""},lastname:{touched:!1,value:""},email:{touched:!1,value:""}}),i=Object(c.a)(t,2),o=i[0],u=i[1],s=Object(r.useState)(!1),l=Object(c.a)(s,2),f=l[0],m=l[1],v=Object(r.useState)(""),h=Object(c.a)(v,2),O=h[0],E=h[1],y=function(e){return u(W({},o,Object(g.a)({},e,W({},o[e],{touched:!0}))))},x=function(e,n){u(W({},o,Object(g.a)({},n,W({},o[n],{value:e}))))},w={username:""!==o.username.value.trim(),password:""!==o.password.value.trim(),passwordConfirm:o.password.value.trim()===o.passwordConfirm.value.trim(),firstname:""!==o.firstname.value.trim(),lastname:""!==o.lastname.value.trim(),email:""!==o.email.value.trim()},C=function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/register",{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({username:o.username.value,password:o.password.value,firstname:o.firstname.value,lastname:o.lastname.value,email:o.email.value})});case 3:if(201!==(t=e.sent).status){e.next=9;break}return m(!0),e.abrupt("return",setTimeout(function(){return n.push("/login")},3e3));case 9:if(409!==t.status){e.next=13;break}return e.abrupt("return",E("Username and/or email already exist!"));case 13:return e.abrupt("return",E("Issue during registration!"));case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",E("Issue during registration!"));case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement($,null,a.a.createElement(S,{title:"Register",error:O,onSubmit:C},f&&a.a.createElement(q,null,"Registration successful, Redirecting to login!"),a.a.createElement(j,{label:"Username",type:"text",name:"username",value:o.username.value,error:o.username.touched&&!w.username,onBlur:function(){return y("username")},onChange:function(e){return x(e.target.value,"username")},autocomplete:"username"}),a.a.createElement(j,{label:"Password",type:"password",name:"password",value:o.password.value,error:o.password.touched&&!w.password,onBlur:function(){return y("password")},onChange:function(e){return x(e.target.value,"password")},autocomplete:"password"}),a.a.createElement(j,{label:"Confirm Password",type:"password",name:"passwordConfirm",value:o.passwordConfirm.value,error:o.passwordConfirm.touched&&!w.passwordConfirm,onBlur:function(){return y("passwordConfirm")},onChange:function(e){return x(e.target.value,"passwordConfirm")},autocomplete:"password"}),a.a.createElement(j,{label:"Firstname",type:"text",name:"firstname",value:o.firstname.value,error:o.firstname.touched&&!w.firstname,onBlur:function(){return y("firstname")},onChange:function(e){return x(e.target.value,"firstname")},autocomplete:"firstname"}),a.a.createElement(j,{label:"Lastname",type:"text",name:"lastname",value:o.lastname.value,error:o.lastname.touched&&!w.lastname,onBlur:function(){return y("lastname")},onChange:function(e){return x(e.target.value,"lastname")},autocomplete:"lastname"}),a.a.createElement(j,{label:"Email",type:"text",name:"email",value:o.email.value,error:o.email.touched&&!w.email,onBlur:function(){return y("email")},onChange:function(e){return x(e.target.value,"email")},autocomplete:"email"}),a.a.createElement(k,{disabled:!Object.keys(w).some(function(e){return w[e]})},"Register")),a.a.createElement("p",null,"Already have an account? ",a.a.createElement(b.b,{to:"/login"},"Login")))});function Z(){var e=Object(u.a)(["\n  height: 8px;\n  width: 8px;\n  border-radius: 50%;\n  display: inline-block;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: ",";\n"]);return Z=function(){return e},e}function ee(){var e=Object(u.a)(["\n  position: relative;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n  padding: 2px;\n  box-sizing: unset;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background-image: url(",");\n  background-position: center;\n  background-size: cover;\n  background-clip: padding-box;\n"]);return ee=function(){return e},e}function ne(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ne=function(){return e},e}var te=s.c.div(ne()),re=s.c.div(ee(),function(e){return e.size},function(e){return e.size},function(e){return e.image}),ae=s.c.div(Z(),function(e){return e.active?"#00C853":"#d50000"}),ie=function(e){var n=e.image,t=e.username,r=e.size,i=void 0===r?"24px":r,o=e.active,c=e.onClick,u=e.className,s=e.displayStatus,l=void 0!==s&&s;return a.a.createElement(te,{className:u,onClick:c},a.a.createElement(re,{size:i,image:n,alt:t},l&&a.a.createElement(ae,{active:o})))};function oe(){var e=Object(u.a)(["\n  color: inherit;\n"]);return oe=function(){return e},e}function ce(){var e=Object(u.a)(["\n  font-size: 0.6225em;\n  color: inherit;\n"]);return ce=function(){return e},e}function ue(){var e=Object(u.a)(['\n  font-family: "Montserrat", sans-serif;\n  font-weight: 600;\n  font-size: 0.6725em;\n  color: inherit;\n  margin: 0;\n']);return ue=function(){return e},e}function se(){var e=Object(u.a)(["\n  display: flex;\n  flex-grow: 1;\n  margin-left: 0.75em;\n  flex-direction: column;\n"]);return se=function(){return e},e}function le(){var e=Object(u.a)(["\n  padding: 0.5em 1em;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: ",";\n  border-radius: 12px;\n  margin: 0 0.5rem;\n  color: ",";\n  transition: ",";\n  &:hover {\n    background-color: ",";\n  }\n"]);return le=function(){return e},e}var fe=s.c.div(le(),function(e){return e.selected&&e.theme.elemBackgroundHover},function(e){return e.theme.backgroundColor},function(e){return e.theme.transition},function(e){return e.theme.elemBackgroundHover}),me=s.c.div(se()),de=s.c.p(ue()),pe=Object(s.c)(de)(ce()),ge=Object(s.c)(pe)(oe()),be=Object(s.d)(function(e){var n=e.onClick,t=(e.onContextMenu,e.chatActive),r=e.username,i=e.avatar,o=e.userActive,c=e.displayStatus,u=e.message,s=void 0===u?"":u,l=e.timestamp,f=void 0===l?null:l;return a.a.createElement(fe,{onClick:n,selected:t},a.a.createElement(ie,{active:o,username:r,displayStatus:c,image:i}),a.a.createElement(me,null,a.a.createElement(de,null,r),a.a.createElement(pe,null,s)),f&&a.a.createElement(ge,null,new Date(f).toLocaleTimeString().slice(0,5)))});function ve(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: .5rem;\n"]);return ve=function(){return e},e}function he(){var e=Object(u.a)(["\n  padding: 0.25rem 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n"]);return he=function(){return e},e}function Oe(){var e=Object(u.a)(["\n  outline: none;\n  border-radius: 0.25em;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0.25em;\n  color: rgba(0, 0, 0, 0.8);\n  background-color: transparent;\n  font-size: 0.6em;\n  flex-grow: 1;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  margin: ",";\n"]);return Oe=function(){return e},e}function Ee(){var e=Object(u.a)(['\n  font-family: "Montserrat", sans-serif;\n  font-weight: 600;\n  font-size: 0.65em;\n  padding: 0.25rem 0;\n  color: rgba(0, 0, 0, 0.6);\n  & > span {\n    color: rgba(0, 0, 0, 0.4);\n  }\n']);return Ee=function(){return e},e}function ye(){var e=Object(u.a)(["\n  padding: 0.5em 1em;\n  display: flex;\n  justify-content: space-around;\n  background-color: ",";\n  border-radius: 12px;\n  margin: 0 .5rem;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.075);\n  }\n"]);return ye=function(){return e},e}var xe=s.c.div(ye(),function(e){return e.selected&&"rgba(0, 0, 0, 0.075)"}),je=s.c.div(Ee()),we=s.c.button(Oe(),function(e){return e.margin||0}),Ce=s.c.div(he()),ke=s.c.div(ve()),Te=function(e){var n=e.id,t=e.sender,r=e.message,i=e.type,o=e.socket,c=e.image,u=function(){return o.emit("DELETE_NOTIFICATION",n)},s="ERROR"===i||"FRIEND_REQUEST_ACCEPTED"===i,l="FRIEND_REQUEST"===i;return a.a.createElement(xe,null,l&&a.a.createElement(ie,{username:t,image:c}),a.a.createElement(ke,null,a.a.createElement(je,null,a.a.createElement("span",null,r)),l&&a.a.createElement(Ce,null,a.a.createElement(we,{margin:"0 .25em 0 0",onClick:function(){return o.emit("FRIEND_REQUEST_ACCEPTED",{username:t,id:n})}},"Accept"),a.a.createElement(we,{margin:"0 0 0 .25em",onClick:u},"Reject")),s&&a.a.createElement(Ce,null,a.a.createElement(we,{onClick:u},"Dismiss"))))};function _e(){var e=Object(u.a)(['\n  font-family: "Montserrat", sans-serif;\n  font-weight: 500;\n  font-size: 0.6725rem;\n  color: ',";\n  border: none;\n  outline: none;\n  border-radius: 12px;\n  padding: 0.5rem 0.75rem;\n  background-color: ",";\n  transition: ",";\n  flex-grow: 1;\n"]);return _e=function(){return e},e}function Ae(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  margin: 0 0.75rem 1.5rem 0.75rem;\n"]);return Ae=function(){return e},e}var Ie=s.c.div(Ae()),Se=s.c.input(_e(),function(e){return e.theme.backgroundColor},function(e){return e.theme.inputBackground},function(e){return e.theme.transition}),De=function(e){var n=e.search,t=e.value,r=e.onFocus;return a.a.createElement(Ie,null,a.a.createElement(Se,{type:"text",name:"search",placeholder:"Search",value:t,onFocus:r,onChange:function(e){return n(e.target.value)}}))};function Ne(){var e=Object(u.a)(['\n  text-align: center;\n  margin: 0.5em 0;\n  font-family: "Montserrat", sans-serif;\n  font-weight: 500;\n  font-size: 0.6725em;\n  color: ',";\n  background-color: ",";\n  transition: ",";\n"]);return Ne=function(){return e},e}function Re(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  grid-area: lists;\n"]);return Re=function(){return e},e}function Fe(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  border-right: ",";\n  min-width: 280px;\n  overflow-y: hidden;\n  grid-area: lists;\n  padding: 1.5rem 0;\n  z-index: 1;\n  background: ",";\n  transition: ",";\n  @media (max-width: 700px) {\n    position: absolute;\n    left: ",";\n    height: 100%;\n    transition: all 0.25s ease-in-out;\n  }\n"]);return Fe=function(){return e},e}var Le=s.c.div(Fe(),function(e){return e.theme.border},function(e){return e.theme.background},function(e){return e.theme.transition},function(e){return e.open?"64px":"-100%"}),ze=s.c.div(Re()),Pe=s.c.p(Ne(),function(e){return e.theme.backgroundText},function(e){return e.theme.elemBackground},function(e){return e.theme.transition}),Me=function(e){var n=e.socket,t=e.open,i=e.activeList,o=e.setActiveList,u=Object(r.useState)(""),s=Object(c.a)(u,2),l=s[0],m=s[1],d=Object(f.c)(function(e){return e.rootReducer.activeChat.id}),p=Object(f.c)(function(e){return e.rootReducer.user.notifications}),g=Object(f.c)(function(e){return e.rootReducer.chats}).filter(function(e){return""===l||e.recipient.includes(l)}),b=Object(f.c)(function(e){return e.rootReducer.friends}).filter(function(e){return""===l||e.username.includes(l)}),v=Object(f.c)(function(e){return e.rootReducer.accounts}).filter(function(e){return""===l||e.username.includes(l)}),h=Object(f.b)(),O=function(e){return""!==l||i===e},E=""!==l;return a.a.createElement(Le,{open:t},a.a.createElement(De,{value:l,onFocus:function(){return n.emit("LOAD_USERS")},search:m}),a.a.createElement(ze,null,E&&a.a.createElement(Pe,null,"Chats"),O("chats")&&g.map(function(e){return a.a.createElement(be,{key:e.id,username:e.recipient,avatar:e.avatar,userActive:e.active,chatActive:d===e.id,displayStatus:!0,onClick:function(){return h(N({id:e.id,recipient:e.recipient,recipientId:e.recipientId,avatar:e.avatar}))},message:e.last_message,timestamp:e.last_message_timestamp})}),E&&a.a.createElement(Pe,null,"Friends"),O("friends")&&b.map(function(e){return a.a.createElement(be,{id:e.id,key:e.id,username:e.username,onClick:function(){return function(e,t){var r=g.find(function(n){return n.recipient===e});r?h(N({id:r.id,recipient:e,recipientId:t})):n.emit("ADD_CHAT",e),o("chats")}(e.username,e.id)},avatar:e.avatar,active:e.active,displayStatus:!0})}),E&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pe,null,"Users"),v.map(function(e){return a.a.createElement(be,{id:e.id,key:e.id,username:e.username,avatar:e.avatar,onClick:function(){return n.emit("FRIEND_REQUEST",e.id)}})})),O("notifications")&&p.map(function(e){return a.a.createElement(Te,{socket:n,id:e.id,key:e.id,sender:e.sender,message:e.message,type:e.type,image:e.avatar})})))},Be=t(18);function He(){var e=Object(u.a)(["\n  width: 1px;\n  height: 1px;\n  position: absolute;\n"]);return He=function(){return e},e}function Ue(){var e=Object(u.a)(["\n  border-radius: 0.5em;\n  background-color: ",";\n  color: ",";\n  border: ",';\n  padding: 0.75em 1em;\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  font-size: 0.7em;\n  width: max-content;\n  transition: ',";\n"]);return Ue=function(){return e},e}var Ge=s.c.label(Ue(),function(e){return e.theme.buttonBackground},function(e){return e.theme.buttonText},function(e){return e.theme.buttonBorder},function(e){return e.theme.transition}),Ve=s.c.input(He()),Je=function(e){var n=e.file,t=e.className,r=e.children,i=e.text,o=e.uid;return a.a.createElement(Ge,{htmlFor:o,className:t},r,i,a.a.createElement(Ve,{type:"file",onChange:function(e){e.currentTarget.files.length>0&&"image"===e.currentTarget.files[0].type.split("/")[0]&&n(e.currentTarget.files[0],e.currentTarget.files[0].name.split(".")[1])},id:o,name:o}))},Qe=["\ud83d\ude00","\ud83d\ude01","\ud83d\ude02","\ud83e\udd23","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0e","\ud83d\ude0d","\ud83d\ude18","\ud83e\udd70","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83d\ude42","\ud83e\udd17","\ud83e\udd29","\ud83e\udd14","\ud83e\udd28","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude44","\ud83d\ude0f","\ud83d\ude23","\ud83d\ude25","\ud83d\ude2e","\ud83e\udd10","\ud83d\ude2f","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude34","\ud83d\ude0c","\ud83d\ude1b","\ud83d\ude1c","\ud83d\ude1d","\ud83e\udd24","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude15","\ud83d\ude43","\ud83e\udd11","\ud83d\ude32","\u2639\ufe0f","\ud83d\ude41","\ud83d\ude16","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude26","\ud83d\ude27","\ud83d\ude28","\ud83d\ude29","\ud83e\udd2f","\ud83d\ude2c","\ud83d\ude30","\ud83d\ude31","\ud83e\udd75","\ud83e\udd76","\ud83d\ude33","\ud83e\udd2a","\ud83d\ude35","\ud83d\ude21","\ud83d\ude20","\ud83e\udd2c","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83e\udd22","\ud83e\udd2e","\ud83e\udd27","\ud83d\ude07","\ud83e\udd20","\ud83e\udd21","\ud83e\udd73","\ud83e\udd74","\ud83e\udd7a","\ud83e\udd25","\ud83e\udd2b","\ud83e\udd2d","\ud83e\uddd0","\ud83e\udd13","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udc80","\ud83d\udc7b","\ud83d\udc7d","\ud83e\udd16","\ud83d\udca9","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude3f","\ud83d\ude3e"];function We(){var e=Object(u.a)(["\n  display: flex;\n  color: rgba(0, 0, 0, 1);\n  cursor: pointer;\n"]);return We=function(){return e},e}function Ke(){var e=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  left: ","px;\n  max-width: 200px;\n  overflow: auto;\n  flex-wrap: wrap;\n  max-height: 200px;\n  border-radius: 12px;\n  background-color: inherit;\n  scrollbar-width: thin;\n  padding: 0.25rem;\n  top: ","px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"]);return Ke=function(){return e},e}var Xe=s.c.div(Ke(),function(e){return e.right},function(e){return e.top}),$e=s.c.div(We()),qe=function(e){var n=e.selected,t=e.right,r=e.top;return a.a.createElement(Xe,{right:t,top:r},Qe.map(function(e){return a.a.createElement($e,{key:e,onClick:function(){return n(e)}},e)}))};function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ze(){var e=Object(u.a)(["\n  margin-right: 0.5rem;\n  color: inherit;\n"]);return Ze=function(){return e},e}function en(){var e=Object(u.a)(["\n  background-color: transparent;\n  display: flex;\n  padding: 0;\n  color: inherit;\n  > svg {\n    font-size: 20px;\n    color: inherit;\n  }\n"]);return en=function(){return e},e}function nn(){var e=Object(u.a)(['\n  display: flex;\n  align-items: center;\n  white-space: pre-wrap;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-all;\n  overflow: auto;\n  scrollbar-width: thin;\n  font-family: "Montserrat", sans-serif;\n  font-weight: 500;\n  font-size: 0.6725rem;\n  line-height: 140%;\n  height: 100%;\n  flex-grow: 1;\n']);return nn=function(){return e},e}function tn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0.5rem 0.75rem;\n  min-height: 2rem;\n  max-height: 8rem;\n  border-radius: 12px;\n  color: ",";\n  background-color: ",";\n  transition: all 0.05s ease-in-out;\n  margin: 0.5rem 1.5rem 0 1.5rem;\n  transition: ",";\n  &:focus-within {\n    ",";\n  }\n"]);return tn=function(){return e},e}var rn=s.c.div(tn(),function(e){return e.theme.backgroundColor},function(e){return e.theme.inputBackground},function(e){return e.theme.transition},function(e){return e.theme.foregroundColor}),an=s.c.div(nn()),on=Object(s.c)(Je)(en()),cn=Object(s.c)(Be.f)(Ze()),un=function(e){var n=e.socket,t=e.activeChatId,i=Object(r.useRef)(null),o=Object(r.useState)({open:!1,top:0,right:0}),u=Object(c.a)(o,2),s=u[0],l=u[1],f="Enter message...",m=function(){var e=Object(p.a)(d.a.mark(function e(r,a){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{""!==t&&n.emit("ADD_MESSAGE_TO_CHAT",{image:r,extension:a,chat:t})}catch(i){}case 1:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),b=function(e){e.currentTarget.innerText.trim()===f?e.currentTarget.innerText="":""===e.currentTarget.innerText.trim()&&(e.currentTarget.innerText=f)};return Object(r.useEffect)(function(){i&&(i.current.innerText=f)},[t]),a.a.createElement(rn,null,a.a.createElement(an,{contentEditable:"true",ref:i,onKeyUp:function(e){var r=e.currentTarget.innerText.trim();"Enter"===e.key&&""!==t&&""!==r&&(n.emit("ADD_MESSAGE_TO_CHAT",{message:r,chat:t}),e.currentTarget.innerText=""),l(!1)},onFocus:b,onBlur:b,suppressContentEditableWarning:!0},f),a.a.createElement(cn,{onClick:function(e){if(s.open)return l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(t,!0).forEach(function(n){Object(g.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},s,{open:!1}));var n=e.currentTarget.getBoundingClientRect();return l({open:!s.open,right:n.right-220+n.width,top:n.top-200-n.height})},size:"1em"}),s.open&&a.a.createElement(qe,{selected:function(e){return i.current.innerText.trim()===f?i.current.innerText=e:i.current.innerText+=e},top:s.top,right:s.right}),a.a.createElement(on,{uid:"mms",file:m},a.a.createElement(Be.d,{size:"1em"})))};function sn(){var e=Object(u.a)(["\n  max-width: 100%;\n  max-height: 200px;\n  display: ",";\n"]);return sn=function(){return e},e}var ln=s.c.img(sn(),function(e){return"loaded"===e.state?"unset":"none"}),fn=function(e){var n=e.image,t=e.onClick,i=Object(r.useState)("loading"),o=Object(c.a)(i,2),u=o[0],s=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(ln,{state:u,src:n,onError:function(){return s("failure")},onLoad:function(){return s("loaded")},alt:"Image not available",onClick:t}),n&&"loading"===u&&a.a.createElement("p",null,"Loading"),n&&"failure"===u&&a.a.createElement("p",null,"Failure"))};function mn(){var e=Object(u.a)(["\n  border-radius: ",";\n  margin-left: ",";\n  padding: ",";\n  max-width: ",";\n  overflow: ",";\n  display: ",";\n  flex-direction: ",";\n  background-color: ",";\n  transition: ",';\n  color: inherit;\n  & > span {\n    font-family: "Roboto", sans-serif;\n    text-rendering: optimizeLegibility;\n    font-size: 0.85em;\n    color: inherit;\n  }\n']);return mn=function(){return e},e}function dn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  padding: 0.25em 0;\n  color: ",";\n  transition: ",";\n"]);return dn=function(){return e},e}var pn=s.c.div(dn(),function(e){return e.justify?"flex-start":"flex-end"},function(e){return e.theme.foregroundColor},function(e){return e.theme.transition}),gn=s.c.div(mn(),function(e){return e.borderRadius?".25em 1em 1em":"1em .25em 1em 1em"},function(e){return e.margin?".5rem":"unset"},function(e){return e.image?"0":"0.5em 1em"},function(e){return e.image?"35%":"unset"},function(e){return e.image?"hidden":"unset"},function(e){return e.image?"flex":"unset"},function(e){return e.image?"column":"unset"},function(e){return e.theme.messageBackground},function(e){return e.theme.transition}),bn=function(e){var n=e.received,t=void 0!==n&&n,r=e.message,i=e.recipient,o=e.avatar,c=e.image,u=e.onClick;return a.a.createElement(pn,{justify:t},t&&a.a.createElement(ie,{size:"20px",name:i,image:o}),a.a.createElement(gn,{margin:t,borderRadius:t,image:c},a.a.createElement("span",null,r),c&&a.a.createElement(fn,{image:c,onClick:u})))};function vn(){var e=Object(u.a)(["\nmax-height: 90vh;\nmax-width: 90vw;\nborder-radius: 1em;\n"]);return vn=function(){return e},e}function hn(){var e=Object(u.a)(["\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.8);\n  height: 100%;\n  width: 100%;\n  z-index: -1;\n"]);return hn=function(){return e},e}function On(){var e=Object(u.a)(["\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  z-index: 2;\n"]);return On=function(){return e},e}var En=s.c.div(On()),yn=s.c.div(hn()),xn=s.c.img(vn()),jn=function(e){var n=e.image,t=e.callback;return a.a.createElement(En,null,a.a.createElement(yn,{onClick:t}),a.a.createElement(xn,{src:n,onClick:t}))};function wn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  padding: 0 1.5rem;\n"]);return wn=function(){return e},e}function Cn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  grid-area: messages;\n  justify-content: space-between;\n  padding: 1.5rem 0;\n  background-color: ",";\n  transition: ",";\n"]);return Cn=function(){return e},e}var kn=s.c.div(Cn(),function(e){return e.theme.background},function(e){return e.theme.transition}),Tn=s.c.div(wn()),_n=function(e){var n=e.socket,t=Object(r.useRef)(null),i=Object(f.c)(function(e){return e.rootReducer.activeChat}),o=Object(r.useState)(null),u=Object(c.a)(o,2),s=u[0],l=u[1];return Object(r.useEffect)(function(){i.id&&n.emit("LOAD_ACTIVE_CHAT_MESSAGES",i.id)},[n,i.id]),Object(r.useEffect)(function(){t.current.scrollTop=t.current.scrollHeight},[i.messages]),a.a.createElement(kn,null,s&&a.a.createElement(jn,{image:s,callback:function(){return l(null)}}),a.a.createElement(Tn,{ref:t},null!==i.id&&i.messages.map(function(e){return a.a.createElement(bn,{key:e.id,received:e.username===i.recipient,message:e.message,recipient:i.recipient,avatar:i.avatar,image:e.image,onClick:function(){return l(e.image)}})})),a.a.createElement(un,{socket:n,activeChatId:i.id}))};function An(){var e=Object(u.a)(["\n  margin: 0 0 0.75rem 0;\n  cursor: pointer;\n"]);return An=function(){return e},e}function In(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return In=function(){return e},e}function Sn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Sn=function(){return e},e}function Dn(){var e=Object(u.a)(["\n  padding: 0.5em 0;\n  box-sizing: content-box;\n  color: ",";\n"]);return Dn=function(){return e},e}function Nn(){var e=Object(u.a)(["\n  padding: 0.5em 0;\n  box-sizing: content-box;\n  color: ",";\n"]);return Nn=function(){return e},e}function Rn(){var e=Object(u.a)(["\n  padding: 1em 0;\n  box-sizing: content-box;\n  color: ",";\n"]);return Rn=function(){return e},e}function Fn(){var e=Object(u.a)(["\n  padding: 1em 0;\n  box-sizing: content-box;\n  color: ",";\n"]);return Fn=function(){return e},e}function Ln(){var e=Object(u.a)(["\n  padding: 1em 0;\n  box-sizing: content-box;\n  color: ",";\n"]);return Ln=function(){return e},e}function zn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  grid-area: nav;\n  padding: 1.5rem 0;\n  justify-content: space-between;\n  z-index: 2;\n  border-right: ",";\n  background: ",";\n  transition: ",";\n"]);return zn=function(){return e},e}var Pn=s.c.div(zn(),function(e){return e.theme.border},function(e){return e.theme.background},function(e){return e.theme.transition}),Mn=Object(s.c)(Be.g)(Ln(),function(e){return"friends"===e.active?e.theme.foregroundColor:e.theme.backgroundColor}),Bn=Object(s.c)(Be.c)(Fn(),function(e){return"chats"===e.active?e.theme.foregroundColor:e.theme.backgroundColor}),Hn=Object(s.c)(Be.a)(Rn(),function(e){return"notifications"===e.active?e.theme.foregroundColor:e.theme.backgroundColor}),Un=Object(s.c)(Be.b)(Nn(),function(e){return"settings"===e.active?e.theme.foregroundColor:e.theme.backgroundColor}),Gn=Object(s.c)(Be.e)(Dn(),function(e){return e.theme.nightModeBtn}),Vn=s.c.div(Sn()),Jn=s.c.div(In()),Qn=Object(s.c)(ie)(An()),Wn=function(e){var n=e.avatar,t=e.activeList,r=e.setActiveList,i=e.setPos,o=e.setNightModeState,c=e.nightModeState;return a.a.createElement(Pn,null,a.a.createElement(Vn,null,a.a.createElement(Qn,{size:"32px",image:n,onClick:i}),a.a.createElement(Mn,{size:"20px",active:t,onClick:function(){return r("friends")}}),a.a.createElement(Bn,{size:"20px",active:t,onClick:function(){return r("chats")}}),a.a.createElement(Hn,{size:"20px",active:t,onClick:function(){return r("notifications")}})),a.a.createElement(Jn,null,a.a.createElement(Gn,{size:"20px",onClick:function(){return o(!c)}}),a.a.createElement(Un,{size:"20px",active:t,onClick:function(){return r("settings")}})))};function Kn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return Kn=function(){return e},e}function Xn(){var e=Object(u.a)(["\n  font-weight: 400;\n  font-size: 0.6em;\n  color: ",";\n  transition: ",";\n"]);return Xn=function(){return e},e}function $n(){var e=Object(u.a)(['\n  font-family: "Roboto", sans-serif;\n  font-weight: 500;\n  color: inherit;\n  font-size: 0.8em;\n  padding: 0;\n  margin: 0;\n']);return $n=function(){return e},e}function qn(){var e=Object(u.a)(['\n  font-family: "Roboto", sans-serif;\n  font-weight: 400;\n  color: inherit;\n  font-size: 1.25rem;\n  margin-left: 1rem;\n']);return qn=function(){return e},e}function Yn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin: ",";\n"]);return Yn=function(){return e},e}function Zn(){var e=Object(u.a)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  background-color: inherit;\n  border-radius: 0.25em;\n  padding: 1em;\n  flex-basis: 500px;\n  z-index: 4;\n  background-color: ",";\n  transition: ",";\n"]);return Zn=function(){return e},e}function et(){var e=Object(u.a)(["\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  height: 100%;\n  width: 100%;\n"]);return et=function(){return e},e}function nt(){var e=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  align-items: center;\n  justify-content: center;\n  z-index: 3;\n  color: ",";\n  transition: ",";\n"]);return nt=function(){return e},e}var tt=s.c.div(nt(),function(e){return e.theme.backgroundColor},function(e){return e.theme.transition}),rt=s.c.div(et()),at=s.c.div(Zn(),function(e){return e.theme.background},function(e){return e.theme.transition}),it=s.c.div(Yn(),function(e){return e.justify||"unset"},function(e){return e.margin||"0 0 1.5rem 0;"}),ot=s.c.h1(qn()),ct=s.c.p($n()),ut=Object(s.c)(ct)(Xn(),function(e){return e.theme.foregroundColor},function(e){return e.theme.transition}),st=s.c.div(Kn()),lt=function(e){var n=e.socket,t=e.setActiveList,r=e.visible_in_searches,i=e.avatar,o=function(){var e=Object(p.a)(d.a.mark(function e(t,r){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.emit("ACCOUNT_UPDATE",{update:"avatar",extension:r,value:t});case 1:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}();return a.a.createElement(tt,null,a.a.createElement(rt,{onClick:function(){return t("chats")}}),a.a.createElement(at,null,a.a.createElement(it,null,a.a.createElement(ie,{image:i}),a.a.createElement(ot,null,"Account Settings")),a.a.createElement(it,{justify:"space-between",margin:"0.75rem 0"},a.a.createElement(st,null,a.a.createElement(ct,null,"Account Visibility"),a.a.createElement(ut,null,"Enable other users to find your account via search.")),a.a.createElement(P,{onClick:function(){return n.emit("ACCOUNT_UPDATE",{update:"visible_in_searches",value:!r})},state:r})),a.a.createElement(it,{justify:"space-between",margin:"0.75rem 0"},a.a.createElement(st,null,a.a.createElement(ct,null,"Change Avatar"),a.a.createElement(ut,null,"Upload an image to use as an avatar.")),a.a.createElement(Je,{uid:"avatar",file:o,text:"Upload Image"}))))},ft=t(60);function mt(){var e=Object(u.a)(["\n  margin-right: 0.5rem;\n"]);return mt=function(){return e},e}function dt(){var e=Object(u.a)(["\n  font-size: 1.85rem;\n  color: rgba(0, 0, 0, 0.87);\n"]);return dt=function(){return e},e}function pt(){var e=Object(u.a)(['\n  font-size: 0.75rem;\n  font-family: "Roboto", "Helvetica", "Arial", sans-serif;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.87);\n  line-height: 1.43;\n  letter-spacing: 0.01071em;\n  padding: 0.5rem 0rem;\n']);return pt=function(){return e},e}function gt(){var e=Object(u.a)(["\n  padding: 0.25rem;\n  border-radius: 50%;\n  margin-left: 1rem;\n  display: flex;\n  margin-right: -0.5rem;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n  &:active {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n"]);return gt=function(){return e},e}function bt(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 12px;\n  align-items: center;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  background-color: ",";\n  padding: 0.5rem 1rem;\n  min-width: 280px;\n  margin: 0.25rem;\n"]);return bt=function(){return e},e}var vt=s.c.div(bt(),function(e){return e.bgColor?"rgba(211, 47, 47, 1)":"rgb(245, 245, 245)"}),ht=s.c.span(gt()),Ot=s.c.span(pt()),Et=Object(s.c)(ft.a)(dt()),yt=Object(s.c)(ie)(mt()),xt=function(e){var n=e.uuid,t=e.type,i=e.message,o=e.dismiss,c=e.avatar,u=void 0===c?null:c,s=e.sender,l=void 0===s?null:s;return Object(r.useEffect)(function(){"ERROR"!==t&&setTimeout(function(){return o(n)},3e3)},[o,t,n]),a.a.createElement(vt,{bgColor:"ERROR"===t},u&&a.a.createElement(yt,{image:u,username:l}),a.a.createElement(Ot,null,i),a.a.createElement(ht,{onClick:function(){return o(n)}},a.a.createElement(Et,{size:"1em"})))};function jt(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  right: 1rem;\n  top: 1rem;\n  max-height: calc(100vh - 1rem);\n  overflow-y: auto;\n"]);return jt=function(){return e},e}var wt=s.c.div(jt()),Ct=function(e){var n=e.socket,t=Object(f.c)(function(e){return e.rootReducer.user.notifications}),r=function(e){return n.emit("DISMISS_NOTIFICATION",e)};return a.a.createElement(wt,null,t.map(function(e){return!e.dismissed&&a.a.createElement(xt,{type:e.type,key:e.id,uuid:e.id,message:e.message,dismiss:r,avatar:e.avatar})}))};function kt(){var e=Object(u.a)(['\n  font-size: 0.85rem;\n  font-family: "Roboto", "Helvetica", "Arial", sans-serif;\n  font-weight: 500;\n  color: ',";\n  padding: 0.5rem;\n"]);return kt=function(){return e},e}function Tt(){var e=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  flex-direction: column;\n  align-items: center;\n  max-width: 150px;\n  top: ","px;\n  left: ","px;\n  background: ",";\n  padding: 0.5rem;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  width: 100%;\n  z-index: 2;\n  transition: ",";\n  & > button {\n    font-size: 0.7rem;\n    width: 100%;\n  }\n"]);return Tt=function(){return e},e}var _t=s.c.div(Tt(),function(e){return e.top},function(e){return e.right},function(e){return e.theme.background},function(e){return e.theme.transition}),At=s.c.div(kt(),function(e){return e.theme.backgroundColor}),It=function(e){var n=e.top,t=e.right,r=e.avatar,i=e.username,o=e.setActiveList,c=Object(f.b)(),u=function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:200===e.sent.status&&c({type:"LOGOUT"});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(_t,{top:n,right:t},a.a.createElement(ie,{image:r,size:"32px"}),a.a.createElement(At,null,i),a.a.createElement(k,{onClick:u},"Logout"),a.a.createElement(k,{onClick:function(){return o("settings")}},"Settings"))};function St(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Dt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?St(t,!0).forEach(function(n){Object(g.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):St(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Nt(){var e=Object(u.a)(['\n  display: grid;\n  grid-template-columns: 64px auto 1fr;\n  grid-template-rows: 1fr;\n  grid-template-areas: "nav lists messages";\n  height: 100%;\n  width: 100%;\n  background-color: #f7f7f7;\n']);return Nt=function(){return e},e}var Rt=s.c.div(Nt()),Ft=function(e){var n=e.socket,t=e.nightModeState,i=Object(f.c)(function(e){return e.rootReducer.user}),o=Object(r.useState)({active:"chats",open:!1}),u=Object(c.a)(o,2),s=u[0],l=u[1],m=Object(r.useState)({open:!1,top:0,right:0}),d=Object(c.a)(m,2),p=d[0],g=d[1],b=Object(f.b)(),v=function(e){return l(Dt({},s,{active:e}))};return n&&a.a.createElement(Rt,null,p.open&&a.a.createElement(It,{socket:n,top:p.top,right:p.right,avatar:i.avatar,username:i.username,setActiveList:v}),a.a.createElement(Wn,{socket:n,avatar:i.avatar,activeList:s.active,setActiveList:function(e){e===s.active?l(Dt({},s,{open:!s.open})):l(Dt({},s,{open:!0,active:e}))},setPos:function(e){if(p.open)g(Dt({},p,{open:!1}));else{var n=e.currentTarget.getBoundingClientRect();g({open:!0,right:n.right+n.height/3,top:n.top+n.width/2})}},setNightModeState:function(){return b({type:"SET_NIGHT_MODE"})},nightModeState:t}),a.a.createElement(Me,{socket:n,open:s.open,activeList:s.active,setActiveList:v}),a.a.createElement(_n,{socket:n}),a.a.createElement(Ct,{socket:n}),"settings"===s.active&&a.a.createElement(lt,{socket:n,visible_in_searches:i.visible_in_searches,avatar:i.avatar,setActiveList:v}))},Lt=t(61),zt=t.n(Lt),Pt=function(){var e=Object(f.c)(function(e){return e.rootReducer.user.loggedIn}),n=Object(f.b)(),t=Object(r.useRef)(null);return Object(r.useEffect)(function(){e?(t.current=zt()("/"),t.current.on("REAUTH",function(){return n({type:"LOGOUT"})}),t.current.on("LOAD_CHATS",function(e){return n(function(e){return{type:"LOAD_CHATS",payload:e}}(e))}),t.current.on("LOAD_FRIENDS",function(e){return n(function(e){return{type:"LOAD_FRIENDS",payload:e}}(e))}),t.current.on("LOAD_USERS",function(e){return n(function(e){return{type:"LOAD_USERS",payload:e}}(e))}),t.current.on("LOAD_NOTIFICATIONS",function(e){return n(function(e){return{type:"LOAD_NOTIFICATIONS",payload:e}}(e))}),t.current.on("LOAD_ACTIVE_CHAT_MESSAGES",function(e){return n(function(e){return{type:"LOAD_ACTIVE_CHAT_MESSAGES",payload:e}}(e))}),t.current.on("ADD_MESSAGE_TO_CHAT",function(e){n(function(e){return{type:"ADD_MESSAGE_TO_CHAT",payload:e}}(e))}),t.current.on("ADD_FRIEND",function(e){return n(function(e){return{type:"ADD_FRIEND",payload:e}}(e))}),t.current.on("ADD_CHAT",function(e){n(function(e){return{type:"ADD_CHAT",payload:e}}(e)),n(N({id:e.id,recipient:e.recipient,recipientId:e.recipientId,avatar:e.avatar}))}),t.current.on("ADD_NOTIFICATION",function(e){return n(function(e){return{type:"ADD_NOTIFICATION",payload:e}}(e))}),t.current.on("DISMISS_NOTIFICATION",function(e){return n(function(e){return{type:"DISMISS_NOTIFICATION",payload:e}}(e))}),t.current.on("DELETE_NOTIFICATION",function(e){return n(function(e){return{type:"DELETE_NOTIFICATION",payload:e}}(e))}),t.current.on("SET_FRIEND_ONLINE",function(e){return n(function(e){return{type:"SET_FRIEND_ONLINE",payload:e}}(e))}),t.current.on("SET_FRIEND_OFFLINE",function(e){return n(function(e){return{type:"SET_FRIEND_OFFLINE",payload:e}}(e))}),t.current.on("ERROR",function(e){return n(function(e){return{type:"ERROR",payload:e}}(e))}),t.current.on("ACCOUNT_UPDATE",function(e){return n(function(e){return{type:"ACCOUNT_UPDATE",payload:e}}(e))})):t.current&&t.current.close()},[e,n]),[t,e]};function Mt(){var e=Object(u.a)(["\n* {\n  box-sizing: border-box;\n}\n  body {\n    margin: 0;\n    padding: 0;\n  }\n  #root {\n    height: 100vh;\n    width: 100vw;\n  }\n"]);return Mt=function(){return e},e}var Bt=Object(s.b)(Mt());var Ht=function(){var e=Pt(),n=Object(c.a)(e,2),t=n[0],r=n[1],i=Object(f.c)(function(e){return e.rootReducer.ui.mode}),o={background:i?"rgb(31, 31, 31)":"rgb(245, 245, 245)",border:i?"1px solid rgba(245,245,245,0.1)":"1px solid rgba(0,0,0,.1)",messageBackground:i?"rgba(245, 245, 245, 0.2)":"rgba(0, 0, 0, 0.075)",inputBackground:i?"#4a4a4a":"rgba(0, 0, 0, 0.1)",elemBackground:"rgba(245, 245, 245, 0.2)",elemBackgroundHover:i?"rgba(245, 245, 245, .05)":"rgba(0, 0, 0, .05)",foregroundColor:i?"rgba(245, 245, 245, 0.8)":"rgba(0, 0, 0, 0.8)",backgroundColor:i?"rgba(245, 245, 245, 0.6)":"rgba(0, 0, 0, 0.6)",nightModeBtn:i?"#f0c420":"rgba(0, 0, 0, 0.5)",buttonBackground:i?"transparent":"rgba(0, 0, 0, 0.8)",buttonBorder:i?"1px solid rgba(245,245,245,0.1)":"none",buttonText:"rgba(245, 245, 245, 0.8)",transition:"all .5s cubic-bezier(0.39, 0.575, 0.565, 1)"};return a.a.createElement(s.a,{theme:o},a.a.createElement(Bt,null),r?a.a.createElement(l.a,{to:"/"}):a.a.createElement(l.b,{exact:!0,path:"/login",component:J}),r?a.a.createElement(l.a,{to:"/"}):a.a.createElement(l.b,{exact:!0,path:"/register",component:Y}),a.a.createElement(l.b,{exact:!0,path:"/",render:function(){return r?a.a.createElement(Ft,{socket:t.current}):a.a.createElement(l.a,{to:"/login"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ut=t(62),Gt=t(14),Vt=t(10);function Jt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Qt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Jt(t,!0).forEach(function(n){Object(g.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jt(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Wt={friends:[],chats:[],accounts:[],activeChat:{id:null,recipientId:null,messages:[]},user:{loggedIn:!1,id:null,username:null,avatar:null,notifications:[],visible_in_searches:!1},ui:{mode:!1}},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt.user.notifications,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_NOTIFICATIONS":return Object(Vt.a)(n.payload);case"ADD_NOTIFICATION":return[].concat(Object(Vt.a)(e),[n.payload]);case"DELETE_NOTIFICATION":var t=e.findIndex(function(e){return e.id===n.payload});return[].concat(Object(Vt.a)(e.slice(0,t)),Object(Vt.a)(e.slice(t+1)));case"DISMISS_NOTIFICATION":var r=e.findIndex(function(e){return e.id===n.payload});return[].concat(Object(Vt.a)(e.slice(0,r)),[Qt({},e[r],{dismissed:!0})],Object(Vt.a)(e.slice(r+1)));default:return e}},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt.friends,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_FRIEND":return[].concat(Object(Vt.a)(e),[n.payload]);case"SET_FRIEND_ONLINE":return e.map(function(e){return e.id===n.payload?Qt({},e,{active:!0}):e});case"SET_FRIEND_OFFLINE":return e.map(function(e){return e.id===n.payload?Qt({},e,{active:!1}):e});default:return e}},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt.chats,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_CHAT":return[].concat(Object(Vt.a)(e),[n.payload]);case"ADD_MESSAGE_TO_CHAT":return e.map(function(e){return e.id===n.payload.chatId?Qt({},e,{last_message:n.payload.last_message,last_message_timestamp:n.payload.last_message_timestamp}):e});case"SET_FRIEND_ONLINE":return e.map(function(e){return e.recipientId===n.payload?Qt({},e,{active:!0}):e});case"SET_FRIEND_OFFLINE":return e.map(function(e){return e.recipientId===n.payload?Qt({},e,{active:!1}):e});default:return e}},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt.activeChat,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_MESSAGE_TO_CHAT":return n.payload.chatId!==e.id?e:Qt({},e,{messages:[].concat(Object(Vt.a)(e.messages),[n.payload.message])});case"LOAD_ACTIVE_CHAT_MESSAGES":return Qt({},e,{messages:Object(Vt.a)(n.payload)});case"SET_ACTIVE_CHAT":return Qt({},e,{},n.payload);default:return e}},Yt=Object(Gt.b)({rootReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN":return Qt({},e,{user:Qt({},e.user,{loggedIn:!0},n.payload)});case"LOGOUT":return Wt;case"SET_NIGHT_MODE":return Qt({},e,{ui:{mode:!e.ui.mode}});case"ACCOUNT_UPDATE":return Qt({},e,{user:Qt({},e.user,{},n.payload)});case"LOAD_FRIENDS":return Qt({},e,{friends:Object(Vt.a)(n.payload)});case"LOAD_CHATS":return Qt({},e,{chats:Object(Vt.a)(n.payload)});case"LOAD_USERS":return Qt({},e,{accounts:Object(Vt.a)(n.payload)});case"ADD_FRIEND":return Qt({},e,{friends:Xt(e.friends,n)});case"ADD_CHAT":case"ADD_MESSAGE_TO_CHAT":return Qt({},e,{chats:$t(e.chats,n),activeChat:qt(e.activeChat,n)});case"SET_ACTIVE_CHAT":case"LOAD_ACTIVE_CHAT_MESSAGES":return Qt({},e,{activeChat:qt(e.activeChat,n)});case"SET_FRIEND_ONLINE":case"SET_FRIEND_OFFLINE":return Qt({},e,{friends:Xt(e.friends,n),chats:$t(e.chats,n)});case"ADD_NOTIFICATION":case"LOAD_NOTIFICATIONS":case"DISMISS_NOTIFICATION":case"DELETE_NOTIFICATION":return Qt({},e,{user:Qt({},e.user,{notifications:Kt(e.user.notifications,n)})});default:return e}}}),Zt=t(63),er=t.n(Zt),nr=t(41),tr={key:"root",storage:er.a},rr=Object(nr.a)(tr,Yt),ar=Object(Gt.c)(rr),ir=Object(nr.b)(ar);o.a.render(a.a.createElement(f.a,{store:ar},a.a.createElement(Ut.a,{loading:null,persistor:ir},a.a.createElement(b.a,null,a.a.createElement(Ht,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(e,n,t){e.exports=t(108)}},[[66,1,2]]]);
//# sourceMappingURL=main.8e6189a7.chunk.js.map